import{r as l,f as w,w as b,o as A,c as r,a as e,U as y,C,h as d,i as N,P as T,a0 as V,ac as c,a8 as u,d as o,ad as g}from"./main.Dqpd9PAW.js";import{S as m,a as h}from"./stakingConfig.CwD3bOU9.js";const B={class:"content"},D={class:"hero is-medium"},W={class:"hero-body has-text-centered"},F={class:"box is-shadowless"},I={key:0,class:"level"},O={class:"level-item has-text-centered"},R={class:"title"},$={class:"level-item has-text-centered"},q={class:"title"},z={key:0,class:"level-item has-text-centered"},K=["disabled"],M={key:1,class:"has-text-centered"},G={__name:"StakingView",setup(P){const n=l(null),v=l(!1),i=w(()=>g.address),_=w(()=>g.shortAddress),a=l({stakes:!1,withdraw:!1,isEmergency:!1}),p=async()=>{if(i.value)try{a.value.stakes=!0;let s=await c({address:m,abi:h,functionName:"stakes",args:[i.value]});const[t]=s,S=E(t,18);n.value=S||0}catch(s){u.error(`Failed to fetch your staked amount:
${s.message}.`),console.log("fetchStakes error",s)}finally{a.value.stakes=!1}},k=async()=>{try{a.value.isEmergency=!0;const t=await c({address:m,abi:h,functionName:"isEmergency"});v.value=t}catch(s){u.error(`Failed to fetch withdraw status:
${s.message}.`),console.log("fetchIsEmergency error",s)}finally{a.value.isEmergency=!1}},x=async()=>{if(!Object.values(a.value).some(s=>s))try{a.value.withdraw=!0,await c({address:m,abi:h,functionName:"emergencyWithdraw"})}catch(s){u.error(`Failed to withdraw:
${s.message}.`),console.log("withdraw error",s)}finally{a.value.withdraw=!1}},E=(s,t)=>Number(s)/10**t,f=async()=>{await p(),await k()};return b(i,f),A(async()=>{await f()}),(s,t)=>(o(),r("div",B,[t[4]||(t[4]=e("h1",{class:"is-title is-square-pixel-7 mt-4"},"Staking",-1)),e("div",D,[e("div",W,[t[3]||(t[3]=e("section",{class:"section"},[e("p",null,"Staking is now halted. Please remove your stakes."),e("p",null,"We are currently preparing our V2 Staking Contract for Deployment."),e("p",null,"More info on this soon.")],-1)),e("div",F,[a.value.stakes?d("",!0):(o(),r("nav",I,[e("div",O,[e("div",null,[t[0]||(t[0]=e("p",{class:"heading"},"Address",-1)),e("p",R,y(_.value),1)])]),e("div",$,[e("div",null,[t[1]||(t[1]=e("p",{class:"heading"},"Staked",-1)),e("p",q,y(n.value),1)])]),v.value&&n.value?(o(),r("p",z,[e("button",{class:C(["button is-primary is-outlined",{"is-loading":a.value.withdraw}]),onClick:x,disabled:a.value.withdraw}," Withdraw ",10,K)])):d("",!0)])),a.value.stakes||a.value.isEmergency?(o(),r("div",M,[N(V,{"min-interval":1,"max-interval":3},{default:T(()=>t[2]||(t[2]=[e("span",{class:"is-size-4 is-square-pixel-7"},"Loading...",-1)])),_:1})])):d("",!0)])])])]))}};export{G as default};
//# sourceMappingURL=StakingView.BiNRU3vH.js.map
